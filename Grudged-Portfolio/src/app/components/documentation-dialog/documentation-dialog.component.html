<div class="dialog-backdrop" *ngIf="isOpen" (click)="onBackdropClick($event)">
  <div class="dialog-container">
    <div class="dialog-header">
      <h3>{{ projectTitle }} - Documentation</h3>
      <button class="close-btn" (click)="closeDialog()">Ã—</button>
    </div>
    
    <div class="dialog-content" *ngIf="diagrams.length > 0">
      <!-- Content type indicator -->
      <div class="content-header">
        <span class="content-type" [class.document]="isCurrentItemMarkdown" [class.diagram]="isCurrentItemImage">
          <span *ngIf="isCurrentItemMarkdown">ðŸ“– Documentation</span>
          <span *ngIf="isCurrentItemImage">ðŸ“Š {{ getItemTitle(diagrams[currentImageIndex]) }}</span>
        </span>
        <span class="item-counter" *ngIf="diagrams.length > 1">
          {{ currentImageIndex + 1 }} / {{ diagrams.length }}
        </span>
      </div>

      <!-- Image viewer for diagrams -->
      <div class="image-viewer" *ngIf="isCurrentItemImage">
        <img 
          [src]="diagrams[currentImageIndex]" 
          [alt]="getItemTitle(diagrams[currentImageIndex])"
          class="diagram-image">
        
        <div class="navigation" *ngIf="diagrams.length > 1">
          <button 
            class="nav-btn prev" 
            (click)="previousImage()" 
            [disabled]="currentImageIndex === 0">
            â€¹
          </button>
          <button 
            class="nav-btn next" 
            (click)="nextImage()" 
            [disabled]="currentImageIndex === diagrams.length - 1">
            â€º
          </button>
        </div>
      </div>

      <!-- Markdown content viewer -->
      <div class="markdown-viewer" *ngIf="isCurrentItemMarkdown">
        <div class="navigation" *ngIf="diagrams.length > 1">
          <button 
            class="nav-btn prev" 
            (click)="previousImage()" 
            [disabled]="currentImageIndex === 0">
            â€¹
          </button>
          <button 
            class="nav-btn next" 
            (click)="nextImage()" 
            [disabled]="currentImageIndex === diagrams.length - 1">
            â€º
          </button>
        </div>

        <div class="markdown-content" *ngIf="!isLoadingMarkdown" [innerHTML]="markdownContent"></div>
        <div class="loading-spinner" *ngIf="isLoadingMarkdown">Loading documentation...</div>
      </div>
      
      <div class="thumbnail-strip" *ngIf="diagrams.length > 1">
        <button 
          *ngFor="let diagram of diagrams; let i = index"
          class="thumbnail"
          [class.active]="i === currentImageIndex"
          [class.markdown-thumb]="diagram.endsWith('.md')"
          (click)="selectItem(i)"
          [title]="getItemTitle(diagram)">
          <img *ngIf="!diagram.endsWith('.md')" [src]="diagram" [alt]="getItemTitle(diagram)">
          <div *ngIf="diagram.endsWith('.md')" class="markdown-thumbnail">
            <span class="icon">ðŸ“–</span>
            <span class="label">Documentation</span>
          </div>
        </button>
      </div>
    </div>
    
    <div class="no-diagrams" *ngIf="diagrams.length === 0">
      <p>No documentation diagrams available for this project.</p>
    </div>
  </div>
</div>